import{r as z,D as H,j as e,B as M}from"../shared/vendor.JlXzk1IK.js";import{e as y,U as w,w as O,g as R,r as S,a as v,b as $,c as K,d as W,h as g,x as _,f as J,y as G,F as Q,i as X,j as Y,z as Z,A as ee,k as te,l as se,m as ae,n as ne,B as oe,p as re,q as ie,s as ce,t as le,u as de,v as F}from"../shared/common.DRxEkvLu.js";const f=()=>{const t=z.useMemo(()=>new H,[]),{transaction:s,screen:a}=t,{isSignupEnabled:o,isForgotPasswordEnabled:i,isPasskeyEnabled:c}=s,{signupLink:n,resetPasswordLink:r,texts:u,captchaImage:d}=a;return{loginIdInstance:t,handleLoginId:async(m,x)=>{const p={username:m?.trim()||""};a.isCaptchaAvailable&&x?.trim()&&(p.captcha=x.trim()),y(`LoginId with options: ${JSON.stringify(p)}`,()=>t.login(p))},handleFederatedLogin:async m=>{y(`Federated login with connection: ${m}`,()=>t.federatedLogin({connection:m}))},handlePasskeyLogin:async()=>{c&&y("Passkey login",()=>t.passkeyLogin())},handlePickCountryCode:async()=>{y("Pick country code",()=>t.pickCountryCode())},texts:u||{},isSignupEnabled:o===!0,isForgotPasswordEnabled:i===!0,isPasskeyEnabled:c===!0,isCaptchaAvailable:a.isCaptchaAvailable===!0,errors:t.getError(),captchaImage:d,captcha:a.captcha||null,signupLink:n,resetPasswordLink:r}},ue=({connections:t})=>{const{handleFederatedLogin:s,handlePasskeyLogin:a,texts:o,isPasskeyEnabled:i}=f(),c=o?.passkeyButtonText||"Continue with a passkey";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-3 mt-2",children:[i&&e.jsx(w,{displayName:"Passkey",buttonText:c,iconComponent:e.jsx("span",{className:"text-primary",children:O()}),onClick:()=>a()},"passkey"),t?.map(n=>{const{displayName:r,iconComponent:u}=R(n),d=`Continue with ${r}`;return e.jsx(w,{displayName:r,buttonText:d,iconComponent:u,onClick:()=>s(n.name)},n.name)})]})})};function he(){const{isSignupEnabled:t,signupLink:s,texts:a}=f();if(!t)return null;const o=S(s),i=a?.footerText||"Don't have an account?",c=a?.footerLinkText||"Sign up";return e.jsxs("div",{className:"mt-4 text-left",children:[e.jsx("span",{className:"pr-1 text-body-text text-(length:--ul-theme-font-body-text-size) font-body",children:i}),o&&e.jsx(v,{href:o,children:c})]})}function me(){const{texts:t}=f(),s=t?.logoAltText||"Application Logo";return e.jsxs(e.Fragment,{children:[e.jsx($,{altText:s}),e.jsx(K,{children:t?.title||"Welcome"}),e.jsx(W,{children:t?.description||"Log in to dev-tenant to continue to my acul react."})]})}function pe(){const{handleLoginId:t,errors:s,isCaptchaAvailable:a,captcha:o,resetPasswordLink:i,isForgotPasswordEnabled:c,loginIdInstance:n,texts:r,handlePickCountryCode:u}=f(),d=M({defaultValues:{identifier:"",captcha:""}}),{formState:{isSubmitting:L}}=d,T=()=>{const l=["light","dark","auto"],h=n?.branding?.themes?.default?.colors?.captcha_widget_theme;return(q=>l.includes(q))(h)?h:"auto"},C=r?.buttonText||"Continue",b=r?.captchaCodePlaceholder?.concat("*")||"CAPTCHA*",m=r?.forgotPasswordText||"Forgot Password?",x=s?.filter(l=>!l.field||l.field===null)||[],p=g("identifier",s)||g("email",s)||g("phone",s)||g("username",s),A=g("captcha",s),{captchaConfig:j,captchaProps:E,captchaValue:I}=_(o||void 0,b,T()),k=n?.transaction?.allowedIdentifiers||[],{label:U,type:N,autoComplete:B}=J(k,r),D=async l=>{await t(l.identifier,I)},P=i&&S(i),V=G(k);return e.jsx(Q,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(D),className:"space-y-2",children:[x.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:x.map((l,h)=>e.jsx(X,{variant:"destructive",children:e.jsx(Y,{children:l.message})},h))}),V&&e.jsx("div",{className:"mb-4",children:e.jsx(Z,{selectedCountry:ee(n?.transaction?.countryCode,n?.transaction?.countryPrefix),onClick:u,fullWidth:!0,placeholder:"Select Country"})}),e.jsx(te,{control:d.control,name:"identifier",rules:{required:"This field is required",maxLength:{value:100,message:"Maximum 100 characters allowed"}},render:({field:l,fieldState:h})=>e.jsxs(se,{children:[e.jsx(ae,{...l,label:U,type:N,autoFocus:!0,autoComplete:B,error:!!h.error||!!p}),e.jsx(ne,{sdkError:p,hasFormError:!!h.error})]})}),a&&j&&e.jsx(oe,{control:d.control,name:"captcha",captcha:j,...E,sdkError:A,rules:{required:"Please complete the CAPTCHA",maxLength:{value:15,message:"CAPTCHA too long"}}}),e.jsx("div",{className:"text-left mb-4",children:c&&P&&e.jsx(v,{href:P,children:m})}),e.jsx(re,{type:"submit",className:"w-full",disabled:L,children:C})]})})}function ye(){const{loginIdInstance:t,texts:s,isPasskeyEnabled:a}=f(),o=t?.transaction?.alternateConnections,i=a||o&&o.length>0,c=s?.separatorText||"OR";document.title=s?.pageTitle||"Login",ie(t);const n=ce("--ul-theme-widget-social-buttons-layout"),r=u=>e.jsxs(e.Fragment,{children:[u==="bottom"&&i&&e.jsx(F,{text:c}),e.jsx(ue,{connections:o}),u==="top"&&i&&e.jsx(F,{text:c})]});return e.jsx(le,{className:"theme-universal",children:e.jsxs(de,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(me,{}),n==="top"&&r("top"),e.jsx(pe,{}),e.jsx(he,{}),n==="bottom"&&r("bottom")]})})}export{ye as default};
//# sourceMappingURL=index.1AN9Dguv.js.map
