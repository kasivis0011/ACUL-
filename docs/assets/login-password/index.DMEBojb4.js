import{r as q,G as K,j as e,B as O}from"../shared/vendor.JlXzk1IK.js";import{e as z,r as E,a as A,b as B,c as R,d as $,h as x,f as G,F as J,i as V,j as W,k as S,l as v,m as _,n as I,o as Q,C as X,p as Y,q as Z,t as ee,u as se}from"../shared/common.DRxEkvLu.js";const g=()=>{const s=q.useMemo(()=>new K,[]),{transaction:t,screen:o}=s,{isSignupEnabled:a,isForgotPasswordEnabled:d,isPasskeyEnabled:m}=t,{signupLink:u,resetPasswordLink:w,texts:h,captchaImage:n,editIdentifierLink:i,links:L,data:f}=o;return{loginPasswordInstance:s,handleLoginPassword:async(P,b,p)=>{const l={username:P?.trim()||"",password:b?.trim()||""};o.isCaptchaAvailable&&p?.trim()&&(l.captcha=p.trim()),z(`LoginPassword with options: ${JSON.stringify(l)}`,()=>s.login(l))},texts:h||{},isSignupEnabled:a===!0,isForgotPasswordEnabled:d===!0,isPasskeyEnabled:m===!0,isCaptchaAvailable:o.isCaptchaAvailable===!0,errors:s.getError(),links:L,editIdentifierLink:i,signupLink:u,resetPasswordLink:w,captchaImage:n,data:f}};function re(){const{isSignupEnabled:s,signupLink:t,texts:o}=g();if(!s)return null;const a=E(t),d=o?.footerText||"Don't have an account?",m=o?.footerLinkText||"Sign up";return e.jsxs("div",{className:"mt-4 text-left",children:[e.jsx("span",{className:"text-sm pr-1",children:d}),a&&e.jsx(A,{href:a,children:m})]})}function ae(){const{texts:s}=g(),t=s?.logoAltText||"Application Logo";return e.jsxs(e.Fragment,{children:[e.jsx(B,{altText:t}),e.jsx(R,{children:s?.title||"Welcome"}),e.jsx($,{children:s?.description||"Enter your password for My Company to continue to My App"})]})}function te(){const{links:s,data:t,handleLoginPassword:o,errors:a,isCaptchaAvailable:d,captchaImage:m,resetPasswordLink:u,isForgotPasswordEnabled:w,loginPasswordInstance:h,texts:n}=g(),i=O({defaultValues:{username:t?.username||"",password:"",captcha:""}}),{formState:{isSubmitting:L}}=i,f=n?.buttonText||"Continue",y=n?.passwordPlaceholder||"Password",P=n?.captchaCodePlaceholder?.concat("*")||"CAPTCHA*",b="CAPTCHA challenge",p=n?.forgotPasswordText||"Forgot Password?",l=a?.filter(r=>!r.field||r.field===null)||[],F=x("username",a)||x("email",a),T=x("password",a),k=x("captcha",a),U=h?.transaction?.getAllowedIdentifiers()||[],j=h?.transaction?.getPasswordPolicy(),{label:N,type:M}=G(U,n),D=async r=>{await o(r.username,r.password,r.captcha)},C=u&&E(u),H=E(s?.edit_identifier)||"";return e.jsx(J,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(D),className:"space-y-2",children:[l.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:l.map((r,c)=>e.jsx(V,{children:e.jsx(W,{children:r.message})},c))}),e.jsx(S,{control:i.control,name:"username",render:({field:r,fieldState:c})=>e.jsxs(v,{children:[e.jsx(_,{...r,label:N,type:M,value:t?.username||"",error:!!c.error||!!F,readOnly:!0,endAdornment:e.jsx(A,{href:H,children:n?.editEmailText||"Edit"}),className:"pr-[16px]"}),e.jsx(I,{sdkError:F,hasFormError:!!c.error})]})}),e.jsx(S,{control:i.control,name:"password",rules:{required:"Password is required",maxLength:{value:200,message:"Maximum 200 characters allowed"},minLength:j?.minLength?{value:j.minLength,message:`Password must be at least ${j.minLength} characters`}:void 0},render:({field:r,fieldState:c})=>e.jsxs(v,{children:[e.jsx(Q,{...r,label:y,autoFocus:!0,autoComplete:"current-password",error:!!c.error||!!T}),e.jsx(I,{sdkError:T,hasFormError:!!c.error})]})}),d&&(T||k||l.length>0)&&e.jsx(X,{control:i.control,name:"captcha",label:P,imageUrl:m||"",imageAltText:b,className:"mb-4",sdkError:k,rules:{required:"Please complete the CAPTCHA",maxLength:{value:15,message:"CAPTCHA too long"}}}),e.jsx("div",{className:"text-left mb-4",children:w&&C&&e.jsx(A,{href:C,children:p})}),e.jsx(Y,{type:"submit",className:"w-full",disabled:L,children:f})]})})}function ie(){const{loginPasswordInstance:s}=g();return Z(s),e.jsx(ee,{className:"theme-universal",children:e.jsxs(se,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(ae,{}),e.jsx(te,{}),e.jsx(re,{})]})})}export{ie as default};
//# sourceMappingURL=index.DMEBojb4.js.map
