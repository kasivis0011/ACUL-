import{r as H,z as M,j as e,B}from"../shared/vendor.JlXzk1IK.js";import{e as P,g as $,U as z,r as E,a as k,b as K,c as O,d as R,f as V,h as L,F as J,i as W,j as G,k as A,l as v,m as Q,n as y,o as X,C as Y,p as Z,q as _,s as ee,t as se,u as te,v as S}from"../shared/common.DRxEkvLu.js";const g=()=>{const s=H.useMemo(()=>new M,[]),{transaction:t,screen:a}=s,{isSignupEnabled:r,isForgotPasswordEnabled:n,passwordPolicy:i}=t,{signupLink:l,resetPasswordLink:m,texts:h,captchaImage:c}=a;return{loginInstance:s,handleLogin:async(u,T,p)=>{const x={username:u?.trim()||"",password:T||""};a.isCaptchaAvailable&&p?.trim()&&(x.captcha=p.trim()),P(`Login with options: ${JSON.stringify(x)}`,()=>s.login(x))},handleFederatedLogin:async u=>{P(`Federated login with connection: ${u}`,()=>s.federatedLogin({connection:u}))},texts:h||{},isSignupEnabled:r===!0,isForgotPasswordEnabled:n===!0,isCaptchaAvailable:a.isCaptchaAvailable===!0,errors:s.getError(),captchaImage:c,signupLink:l,resetPasswordLink:m,allowedIdentifiers:t.allowedIdentifiers||[],passwordPolicy:i}},ae=({connections:s})=>{const{handleFederatedLogin:t}=g();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"space-y-3 mt-2",children:s?.map(a=>{const{displayName:r,iconComponent:n}=$(a),i=`Continue with ${r}`;return e.jsx(z,{displayName:r,buttonText:i,iconComponent:n,onClick:()=>t(a.name)},a.name)})})})};function oe(){const{texts:s,signupLink:t,isSignupEnabled:a}=g(),r=s?.footerText||s?.signupActionText||"Don't have an account?",n=s?.footerLinkText||s?.signupActionLinkText||"Sign up",i=t&&E(t);return e.jsx("div",{className:"mt-4 text-left",children:a&&i&&e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-body-text",children:[r," "]}),e.jsx(k,{href:i,children:n})]})})}function re(){const{texts:s}=g(),t=s?.logoAltText||"Application Logo";return e.jsxs(e.Fragment,{children:[e.jsx(K,{altText:t}),e.jsx(O,{children:s?.title||"Welcome"}),e.jsx(R,{children:s?.description||"Log in to dev-tenant to continue to my acul react."})]})}function ne(){const{handleLogin:s,errors:t,isCaptchaAvailable:a,captchaImage:r,resetPasswordLink:n,isForgotPasswordEnabled:i,texts:l,allowedIdentifiers:m,passwordPolicy:h}=g(),c=B({defaultValues:{username:"",password:"",captcha:""}}),{formState:{isSubmitting:j}}=c,w=l?.buttonText||"Continue",u=l?.captchaCodePlaceholder?.concat("*")||"CAPTCHA*",T="CAPTCHA challenge",p=l?.forgotPasswordText||"Forgot Password?",{label:x,type:U,autoComplete:N}=V(m,l),I=l?.passwordPlaceholder?.concat("*")||"Password*",b=t?.filter(o=>!o.field||o.field===null)||[],f=L("username",t)||L("email",t),C=L("password",t),q=L("captcha",t),D=async o=>{await s(o.username,o.password,o.captcha)},F=n&&E(n);return e.jsx(J,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(D),className:"space-y-2",children:[b.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:b.map((o,d)=>e.jsx(W,{variant:"destructive",children:e.jsx(G,{children:o.message})},d))}),e.jsx(A,{control:c.control,name:"username",rules:{required:"This field is required",maxLength:{value:100,message:"Maximum 100 characters allowed"}},render:({field:o,fieldState:d})=>e.jsxs(v,{children:[e.jsx(Q,{...o,label:x,type:U,autoFocus:!0,autoComplete:N,error:!!d.error||!!f}),e.jsx(y,{sdkError:f,hasFormError:!!d.error})]})}),e.jsx(A,{control:c.control,name:"password",rules:{required:"Password is required",maxLength:{value:200,message:"Maximum 200 characters allowed"},minLength:h?.minLength?{value:h.minLength,message:`Password must be at least ${h.minLength} characters`}:void 0},render:({field:o,fieldState:d})=>e.jsxs(v,{children:[e.jsx(X,{...o,label:I,autoComplete:"current-password",error:!!d.error||!!C}),e.jsx(y,{sdkError:C,hasFormError:!!d.error})]})}),a&&e.jsx(Y,{control:c.control,name:"captcha",label:u,imageUrl:r||"",imageAltText:T,sdkError:q,rules:{required:"Please complete the CAPTCHA",maxLength:{value:15,message:"CAPTCHA too long"}}}),e.jsx("div",{className:"text-left",children:i&&F&&e.jsx(k,{href:F,children:p})}),e.jsx(Z,{type:"submit",className:"w-full",disabled:j,children:w})]})})}function ce(){const{loginInstance:s,texts:t}=g(),a=s?.transaction?.alternateConnections,r=a&&a.length>0,n=t?.separatorText||"OR";document.title=t?.pageTitle||"Login",_(s);const i=ee("--ul-theme-widget-social-buttons-layout"),l=m=>e.jsxs(e.Fragment,{children:[m==="bottom"&&r&&e.jsx(S,{text:n}),e.jsx(ae,{connections:a}),m==="top"&&r&&e.jsx(S,{text:n})]});return e.jsx(se,{className:"theme-universal",children:e.jsxs(te,{className:"w-full max-w-[400px] gap-0",children:[e.jsx(re,{}),i==="top"&&l("top"),e.jsx(ne,{}),e.jsx(oe,{}),i==="bottom"&&l("bottom")]})})}export{ce as default};
//# sourceMappingURL=index.94BkcyTY.js.map
